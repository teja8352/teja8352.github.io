"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8759],{6578:(v,E,o)=>{o.d(E,{V:()=>h});var f=o(5861),l=o(3725),n=o(208),d=o(8274),g=o(7323);let h=(()=>{class i{constructor(e,t,s){this.auth=e,this.firestore=t,this.storage=s}getUserProfile(){const t=(0,l.JU)(this.firestore,`users/${this.auth.currentUser.uid}`);return(0,l._1)(t,{idField:"id"})}uploadCourse(e){var t=this;return(0,f.Z)(function*(){const s=t.auth.currentUser,a=(0,n.iH)(t.storage,`uploads/${s.uid}/profile.png`);try{yield(0,n.sf)(a,e.base64String,"base64");const r=yield(0,n.Jt)(a),c=(0,l.JU)(t.firestore,`users/${s.uid}`);return yield(0,l.pl)(c,{imageUrl:r}),!0}catch{return null}})()}uploadReview(e){var t=this;return(0,f.Z)(function*(){const a=(0,n.iH)(t.storage,`uploads/reviews/${e.name}`);try{return yield(0,n.KV)(a,e.file),{file_url:yield(0,n.Jt)(a)}}catch(r){return{error:r}}})()}pushFileToStorage(e,t){var s=this;return(0,f.Z)(function*(){const r=(0,n.iH)(s.storage,t||`uploads/test/${e.name}`);try{return yield(0,n.KV)(r,e.file),{file_url:yield(0,n.Jt)(r)}}catch(c){return{error:c}}})()}deleteFile(e){var t=this;return(0,f.Z)(function*(){const s=(0,n.iH)(t.storage,e);(0,n.oq)(s).then(u=>u).catch(u=>u)})()}}return i.\u0275fac=function(e){return new(e||i)(d.LFG(g.gx),d.LFG(l.gg),d.LFG(n.Ke))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},8372:(v,E,o)=>{o.d(E,{b:()=>d});var f=o(4986),l=o(4482),n=o(5403);function d(g,h=f.z){return(0,l.e)((i,_)=>{let e=null,t=null,s=null;const u=()=>{if(e){e.unsubscribe(),e=null;const r=t;t=null,_.next(r)}};function a(){const r=s+g,c=h.now();if(c<r)return e=this.schedule(void 0,r-c),void _.add(e);u()}i.subscribe((0,n.x)(_,r=>{t=r,s=h.now(),e||(e=h.schedule(a,g),_.add(e))},()=>{u(),_.complete()},void 0,()=>{t=e=null}))})}}}]);