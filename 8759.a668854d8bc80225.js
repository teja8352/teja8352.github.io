"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8759],{6578:(U,E,s)=>{s.d(E,{V:()=>h});var d=s(5861),l=s(3725),n=s(208),f=s(8274),g=s(7323);let h=(()=>{class a{constructor(e,t,u){this.auth=e,this.firestore=t,this.storage=u}getUserProfile(){const t=(0,l.JU)(this.firestore,`users/${this.auth.currentUser.uid}`);return(0,l._1)(t,{idField:"id"})}uploadCourse(e){var t=this;return(0,d.Z)(function*(){const u=t.auth.currentUser,o=(0,n.iH)(t.storage,`uploads/${u.uid}/profile.png`);try{yield(0,n.sf)(o,e.base64String,"base64");const r=yield(0,n.Jt)(o),c=(0,l.JU)(t.firestore,`users/${u.uid}`);return yield(0,l.pl)(c,{imageUrl:r}),!0}catch{return null}})()}uploadReview(e){var t=this;return(0,d.Z)(function*(){const o=(0,n.iH)(t.storage,`uploads/reviews/${e.name}`);try{return yield(0,n.KV)(o,e.file),{file_url:yield(0,n.Jt)(o)}}catch(r){return{error:r}}})()}pushFileToStorage(e,t){var u=this;return(0,d.Z)(function*(){const r=(0,n.iH)(u.storage,t||`uploads/test/${e.name}`);try{return yield(0,n.KV)(r,e.file),{file_url:yield(0,n.Jt)(r)}}catch(c){return{error:c}}})()}}return a.\u0275fac=function(e){return new(e||a)(f.LFG(g.gx),f.LFG(l.gg),f.LFG(n.Ke))},a.\u0275prov=f.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},8372:(U,E,s)=>{s.d(E,{b:()=>f});var d=s(4986),l=s(4482),n=s(5403);function f(g,h=d.z){return(0,l.e)((a,i)=>{let e=null,t=null,u=null;const _=()=>{if(e){e.unsubscribe(),e=null;const r=t;t=null,i.next(r)}};function o(){const r=u+g,c=h.now();if(c<r)return e=this.schedule(void 0,r-c),void i.add(e);_()}a.subscribe((0,n.x)(i,r=>{t=r,u=h.now(),e||(e=h.schedule(o,g),i.add(e))},()=>{_(),i.complete()},void 0,()=>{t=e=null}))})}}}]);