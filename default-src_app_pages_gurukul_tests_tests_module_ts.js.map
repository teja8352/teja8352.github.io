{"version":3,"file":"default-src_app_pages_gurukul_tests_tests_module_ts.js","mappings":"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","sources":["./src/app/pages/gurukul/tests/tests-routing.module.ts","./src/app/pages/gurukul/tests/tests.module.ts","./src/app/pages/gurukul/tests/tests.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TestsPage } from './tests.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TestsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TestsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TestsPageRoutingModule } from './tests-routing.module';\n\nimport { TestsPage } from './tests.page';\nimport { PdfViewerModule } from 'ng2-pdf-viewer';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PdfViewerModule,\n    TestsPageRoutingModule\n  ],\n  declarations: [TestsPage]\n})\nexport class TestsPageModule { }\n","import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { LoadingController, ModalController } from '@ionic/angular';\nimport { FirebaseCollections } from 'src/app/constants/fb-collections';\nimport { Course, Status, Test } from 'src/app/models/course.interface';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { StateService } from 'src/app/services/state/state.service';\nimport { StorageService } from 'src/app/services/storage/storage.service';\nimport { DataService } from '../../../services/data/data.service';\n\n@Component({\n  selector: 'app-tests',\n  templateUrl: './tests.page.html',\n  styleUrls: ['./tests.page.scss'],\n})\nexport class TestsPage implements OnInit {\n\n  public tests: Test[] = [];\n  public course: Course = null;\n  public schedule: any = null;\n  public segment: string = 'schedule';\n  public zoom: number = 1;\n  private testSubscription = null;\n\n  constructor(\n    private cd: ChangeDetectorRef,\n    private dataService: DataService,\n    private stateService: StateService,\n    private storageService: StorageService,\n    private loadingCtrl: LoadingController,\n    private commonService: CommonService,\n    private modalCtrl: ModalController\n  ) {\n    this.course = this.stateService.getData('course');\n    this.testSubscription = this.dataService.getTests(this.course.id).subscribe(res => {\n      this.tests = res;\n      this.cd.detectChanges();\n    });\n    this.dataService.getScheduleByCourseId(this.course?.id).subscribe((resp: any) => {\n      this.schedule = resp[0];\n      this.zoom = this.segment === 'schedule' ? 1 : this.zoom;\n      this.cd.detectChanges();\n    });\n  }\n\n  ngOnInit() { }\n\n  async uploadSchedule(event: any) {\n    const selectedFile: any = event.target.files[0];\n    const loading = await this.loadingCtrl.create({ message: 'Uploading schedule' });\n    loading.present();\n    try {\n      const file = {\n        file: selectedFile,\n        name: this.course?.id + '_G_' + selectedFile.name,\n        course_id: this.course.id\n      };\n      const upload: any = await this.storageService.pushFileToStorage(file, `uploads/schedule/${file.name}`);\n      if (upload && upload.file_url) {\n        const schedule: any = {\n          file_url: upload.file_url,\n          type: this.commonService.getExtension(selectedFile.name),\n          name: selectedFile.name,\n          course_id: this.course.id\n        };\n        if (this.commonService.isValidData(this.schedule?.id)) {\n          schedule.id = this.schedule.id;\n        }\n        this.dataService.update(FirebaseCollections.SCHEDULES, schedule).then((resp: any) => {\n          // console.log('resp::::::::::::\\n', resp);\n          loading.dismiss();\n        }, err => {\n          loading.dismiss();\n          console.error('Error while uploading schdule:::::::::::\\n', { ...err });\n          if (err.code === 'not-found' || err.code === 'invalid-argument') {\n            this.dataService.add(FirebaseCollections.SCHEDULES, schedule).then((resp: any) => {\n              // console.log(resp);\n              this.dataService.getScheduleByCourseId(this.course?.id).subscribe((response: any) => {\n                this.schedule = response[0];\n              });\n            }, (error: any) => {\n              console.error('Error while adding schdule:::::::::::\\n', error);\n            });\n          }\n        });\n      } else {\n        console.error('Error while uploading schdule:::::::::::\\n', upload);\n        loading.dismiss();\n      }\n    } catch (exception: any) {\n      console.error('Exception while uploading schdule:::::::::::\\n', exception, { ...exception });\n      loading.dismiss();\n    }\n  }\n\n  pageRendered(event: any) {\n    // console.log('event::::::::::::::::::::\\n', event);\n  }\n\n  zoomIn() {\n    this.zoom = this.zoom === 0 ? 1 : this.zoom + 1;\n  }\n\n  zoomOut() {\n    this.zoom = this.zoom - 1;\n    if (this.zoom === 0) {\n      this.zoom = 1;\n    }\n  }\n\n  async addTest() {\n    this.commonService.navigateForward('add-test');\n  }\n\n  async openTest(test: Test) {\n    this.stateService.setData('test', test);\n    this.commonService.navigateForward('test');\n  }\n\n  deleteSchedule() {\n    const schedule: any = { ...this.schedule };\n    this.dataService.delete(FirebaseCollections.SCHEDULES, { id: schedule.id }).then(resp => {\n      this.storageService.deleteFile('uploads/schedule/' + this.course?.id + '_G_' + schedule.name);\n    }, err => {\n      console.error('Error while deleting schdule:::::::::::\\n', err);\n    });\n  }\n\n  deactivateTest(event: any, test: Course) {\n    event.stopPropagation();\n    const status: Status = test.status === 'INACTIVE' ? 'ACTIVE' : 'INACTIVE';\n    this.dataService.updateTest(test.id, { status }).then(res => {\n      //\n    }, err => {\n      console.error('Error wjile deleteing course::::::::::\\n', err);\n    });\n  }\n\n  deleteTest(event: any, test: Course) {\n    event.stopPropagation();\n    this.dataService.updateTest(test.id, { status: 'DELETED' }).then(res => {\n      //\n    }, err => {\n      console.error('Error wjile deleteing course::::::::::\\n', err);\n    });\n  }\n\n  trackByFn(index, item) {\n    return item.id;\n  }\n\n  ngOnDestory() {\n    this.testSubscription?.unsubscribe();\n  }\n}\n"],"names":["Component","ChangeDetectorRef","LoadingController","ModalController","FirebaseCollections","CommonService","StateService","StorageService","DataService","TestsPage","constructor","cd","dataService","stateService","storageService","loadingCtrl","commonService","modalCtrl","course","getData","testSubscription","getTests","id","subscribe","res","tests","detectChanges","getScheduleByCourseId","resp","schedule","zoom","segment","ngOnInit","uploadSchedule","event","selectedFile","target","files","loading","create","message","present","file","name","course_id","upload","pushFileToStorage","file_url","type","getExtension","isValidData","update","SCHEDULES","then","dismiss","err","console","error","code","add","response","exception","pageRendered","zoomIn","zoomOut","addTest","navigateForward","openTest","test","setData","deleteSchedule","delete","deleteFile","deactivateTest","stopPropagation","status","updateTest","deleteTest","trackByFn","index","item","ngOnDestory","unsubscribe","selector","template"],"sourceRoot":"webpack:///"}